{{ subject_str }}

Test results summary
--------------------

run | platform                 | arch   | lab                      | compiler | defconfig          | failures
----+--------------------------+--------+--------------------------+----------+--------------------+---------
{%- for t in test_groups|sort(attribute='name') %}
{{ "%3d | %-24s | %-6s | %-24s | %-8s | %-18s | %d/%d"|format(loop.index, t.board, t.arch, t.lab_name, t.build_environment, t.defconfig, t.total["FAIL"], t.total_tests) }}
{%- endfor %}

{% block plan_description %}
  Test:     {{ plan }}{% endblock %}
  Tree:     {{ tree }}
  Branch:   {{ branch }}
  Describe: {{ kernel }}
  URL:      {{ git_url }}
  SHA:      {{ git_commit }}

{%- if test_suites %}

  Test suite revisions:
{%- for suite in test_suites|sort(attribute='name') %}
    {{ suite.name }}
      URL:  {{ suite.git_url }}
      SHA:  {{ suite.git_commit }}
{%- endfor %}
{%- endif %}

{%- set print_header = true %}
{%- for group in test_groups|sort(attribute='name') %} {# test_groups #}
  {%- if group.total["FAIL"] or group.regressions %} {# fail or regressions #}
    {%- if print_header %}

Test failures
-------------
        {%- set print_header = false %}
    {%- endif %} {# print_header #}

run | platform                 | arch   | lab                      | compiler | defconfig          | failures
----+--------------------------+--------+--------------------------+----------+--------------------+---------
{{ "%3d | %-24s | %-6s | %-24s | %-8s | %-18s | %d/%d"|format(loop.index, group.board, group.arch, group.lab_name, group.build_environment, group.defconfig, group.total["FAIL"], group.total_tests) }}

  Full config: {{ group.defconfig_full }}
  Compiler:    {{ group.build_environment }}{% if group.compiler_version_full %} ({{ group.compiler_version_full }}){% endif %}
  Plain log:   {{ storage_url }}/{{ group.job }}/{{ group.git_branch }}/{{ group.kernel }}/{{ group.arch }}/{{ group.defconfig_full }}/{{ group.build_environment }}/{{ group.lab_name }}/{{ group.boot_log }}
  HTML log:    {{ storage_url }}/{{ group.job }}/{{ group.git_branch }}/{{ group.kernel }}/{{ group.arch }}/{{ group.defconfig_full }}/{{ group.build_environment }}/{{ group.lab_name }}/{{ group.boot_log_html }}
    {%- if group.initrd %}
  Rootfs:      {{ group.initrd }}
    {%- endif %}
    {%- if not test_suites and group.initrd_info.tests_suites %}

  Test suite revisions:
{%- for suite in group.initrd_info.tests_suites|sort(attribute='name') %}
    {{ suite.name }}
      URL:  {{ suite.git_url }}
      SHA:  {{ suite.git_commit }}
{%- endfor %}
    {%- endif %}
    {%- for tc in group.test_cases %}
      {%- if 'FAIL' == tc.status %}

    * {{ tc.name }}: {{ tc.failure_message }}
      {%- endif %}
    {%- endfor %}
    {%- for sg in group.sub_groups|sort(attribute='index') %} {# sub_groups #}
      {%- if sg.total["FAIL"] or sg.regressions %} {# sg fail or regressions #}

    {{ sg.name }} - {{ sg.total_tests }} tests: {{ sg.total["PASS"] }}  PASS, {{ sg.total["FAIL"] }} FAIL, {{ sg.total["SKIP"] }} SKIP
        {%- for tc in sg.test_cases %}
          {%- if 'FAIL' == tc.status %}

      * {{ tc.name }}: {{ tc.failure_message }}
          {%- endif %}
        {%- endfor %}
      {%- endif %} {# sg fail or regressions #}
    {%- endfor %} {# sub_groups #}
  {%- endif %} {# fail or regressions #}
{% endfor %} {# test_groups #}
